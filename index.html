<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VINHMODLAG V49 - FULL TIME EDITION</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #00a884; --bg: #f0f2f5; --card: #ffffff; --text: #1c1e21; --border: #e4e6eb; --header: #ffffff; }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); margin: 0; transition: 0.3s; }
        
        /* AUTH & HEADER */
        #authScreen { position: fixed; inset: 0; background: var(--accent); z-index: 9999; display: flex; align-items: center; justify-content: center; }
        .auth-box { background: var(--card); padding: 40px; border-radius: 25px; width: 350px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.2); }
        .auth-tabs { display: flex; margin-bottom: 20px; border-bottom: 2px solid var(--border); }
        .tab-btn { flex: 1; padding: 10px; cursor: pointer; font-weight: bold; color: #888; }
        .tab-btn.active { color: var(--accent); border-bottom: 2px solid var(--accent); }

        header { position: fixed; top:0; width:100%; height:75px; background: var(--header); display:flex; align-items:center; padding:0 25px; box-shadow:0 2px 15px rgba(0,0,0,0.1); z-index:1000; box-sizing:border-box; }
        .logo { font-weight:900; font-size: 26px; color:var(--accent); }
        .wallet { background:#1a1a1a; color:#00ff88; padding:8px 18px; border-radius:30px; font-weight:bold; margin-left:auto; border: 2px solid var(--accent); font-family: monospace; }

        /* UI COMPONENTS */
        .container { margin-top:100px; padding:20px; max-width:1100px; margin-inline:auto; }
        .intro-box { background: linear-gradient(135deg, #00a884 0%, #007d63 100%); color: white; padding: 25px; border-radius: 20px; margin-bottom: 25px; line-height: 1.6; }
        .intro-box a { color: yellow; font-weight: bold; text-decoration: none; }
        
        .shop-grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:20px; }
        .product-card { background: var(--card); padding:25px; border-radius:20px; border:1px solid var(--border); text-align:center; position:relative; }
        .stock-info { font-size: 11px; color: #666; margin-bottom: 10px; text-align: left; background: #f9f9f9; padding: 10px; border-radius: 12px; border: 1px dashed #ccc; }

        input, select, button, textarea { width:100%; padding:13px; margin:8px 0; border-radius:10px; border:1px solid var(--border); font-family:inherit; box-sizing: border-box; outline: none; }
        .btn-buy { background:var(--accent); color:#fff; border:none; font-weight:bold; cursor:pointer; text-transform:uppercase; transition: 0.2s; }

        #sideMenu { position:fixed; top:0; left:-450px; width:380px; height:100%; background: var(--card); z-index:2000; padding:25px; transition:0.4s; box-shadow:15px 0 40px rgba(0,0,0,0.3); overflow-y:auto; box-sizing:border-box; }
        .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.8); z-index:5000; align-items:center; justify-content:center; backdrop-filter: blur(5px); }
        .modal-content { background: var(--card); padding:30px; border-radius:25px; width:450px; border:2px solid var(--accent); max-height: 85vh; overflow-y: auto; }
        .hist-item { background: var(--bg); padding:12px; border-radius:12px; margin-bottom:10px; text-align: left; font-size: 13px; border-left: 5px solid var(--accent); }
    </style>
</head>
<body>

    <div id="authScreen">
        <div class="auth-box">
            <h1 style="color:var(--accent); font-weight:900; margin:0;">VINHMODLAG</h1>
            <div class="auth-tabs">
                <div class="tab-btn active" id="tabLogin" onclick="switchAuth('login')">ƒêƒÇNG NH·∫¨P</div>
                <div class="tab-btn" id="tabReg" onclick="switchAuth('reg')">ƒêƒÇNG K√ù</div>
            </div>
            <div id="boxLogin">
                <input type="text" id="uLog" placeholder="T√™n ƒëƒÉng nh·∫≠p...">
                <input type="password" id="pLog" placeholder="M·∫≠t kh·∫©u...">
                <button class="btn-buy" onclick="doLogin()">V√ÄO C·ª¨A H√ÄNG</button>
            </div>
            <div id="boxReg" style="display:none">
                <input type="text" id="uReg" placeholder="T√™n t√†i kho·∫£n...">
                <input type="password" id="pReg" placeholder="M·∫≠t kh·∫©u...">
                <input type="password" id="pRegC" placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u...">
                <button class="btn-buy" style="background:#333" onclick="doRegister()">ƒêƒÇNG K√ù NGAY</button>
            </div>
        </div>
    </div>

    <div id="app" style="display:none">
        <header>
            <div onclick="openMenu()" style="font-size:25px; cursor:pointer; color: var(--accent);">‚ò∞</div>
            <div class="logo" style="margin-left:15px;">VINHMODLAG</div>
            <div class="wallet"><span id="uBal">0</span>ƒë</div>
        </header>

        <div id="sideMenu">
            <h2>üë§ S·∫øp: <span id="uNameDisp" style="color:var(--accent)"></span></h2>
            <button onclick="showHistory()" style="background:#333; color:white; font-size:12px;">üìä L·ªäCH S·ª¨ HO·∫†T ƒê·ªòNG</button>
            <hr style="border:0; border-top:1px solid var(--border); margin:15px 0;">

            <div style="display: flex; gap: 5px;">
                <button onclick="switchPay('the')" id="navThe" style="font-size: 10px; background: var(--accent);">N·∫†P TH·∫∫</button>
                <button onclick="switchPay('bank')" id="navBank" style="font-size: 10px; background: #333;">N·∫†P BANK</button>
            </div>

            <div id="payThe" style="margin-top:10px;">
                <select id="cType"><option>Viettel</option><option>Mobi</option><option>Vina</option></select>
                <select id="cVal"><option value="10000">10,000ƒë</option><option value="20000">20,000ƒë</option><option value="50000">50,000ƒë</option><option value="100000">100,000ƒë</option></select>
                <input id="cSeri" placeholder="S·ªë Seri..."><input id="cPin" placeholder="M√£ PIN...">
                <button class="btn-buy" onclick="sendCard()">G·ª¨I TH·∫∫ DUY·ªÜT</button>
            </div>

            <div id="payBank" style="display:none; margin-top:10px; text-align:center;">
                <input type="number" id="bAmount" placeholder="Nh·∫≠p s·ªë ti·ªÅn...">
                <button class="btn-buy" style="background:#0066ff" onclick="makeQR()">T·∫†O M√É QR</button>
                <div id="qrArea" style="display:none; margin-top:10px;">
                    <img id="qrImg" style="width:100%; border-radius:15px; border:2px solid var(--accent);">
                    <p id="qrInfo" style="font-size:11px; color:red; font-weight:bold;"></p>
                </div>
            </div>

            <div id="adminPanel" style="display:none; background:#000; color:#0f8; padding:15px; border-radius:15px; margin-top:20px; font-family:monospace;">
                <b>üñ•Ô∏è ROBOT ADMIN</b>
                <div id="robotLogs" style="height:60px; overflow-y:auto; font-size:10px; margin:5px 0;"></div>
                <button onclick="document.getElementById('modalKey').style.display='flex'" style="background:#0f8; color:#000; font-size:10px;">üì¶ NH·∫¨P KHO PH√ÇN LO·∫†I</button>
                <input id="robotCmd" placeholder="L·ªánh: .chuyentien [t√™n] [ti·ªÅn] chuyen" style="background:#111; color:#fff;">
                <button onclick="executeRobot()">TH·ª∞C THI</button>
            </div>
            <button onclick="logout()" style="color:red; background:none; border:1px solid red; margin-top:20px;">ƒêƒÇNG XU·∫§T</button>
        </div>

        <div class="container">
            <div class="intro-box">
                <h3>üíé ADMIN: Ho√†ng Vinh</h3>
                <p>Zalo h·ªó tr·ª£: <a href="https://zalo.me/84364684151" target="_blank">0975651390</a></p>
                <p>H·ªá th·ªëng t·ª± ƒë·ªông: Mua key xong check <b>L·ªãch s·ª≠</b> ƒë·ªÉ l·∫•y m√£ s·∫øp nh√©!</p>
            </div>
            <div class="shop-grid" id="shopGrid"></div>
        </div>
    </div>

    <div id="modalKey" class="modal"><div class="modal-content">
        <h3 style="margin-top:0">üì¶ NH·∫¨P KHO H√ÄNG</h3>
        <select id="kProd">
            <option value="itachi">Itachi Ping V3</option>
            <option value="hopper">Hopper Plus</option>
            <option value="clone">Acc Clone Level 5</option>
        </select>
        <select id="kTime">
            <option value="1 Ng√†y">G√≥i 1 Ng√†y</option>
            <option value="7 Ng√†y">G√≥i 7 Ng√†y</option>
            <option value="30 Ng√†y">G√≥i 30 Ng√†y</option>
            <option value="Vƒ©nh Vi·ªÖn">G√≥i Vƒ©nh Vi·ªÖn</option>
            <option value="M·∫∑c ƒë·ªãnh">M·∫∑c ƒë·ªãnh (D√†nh cho Acc)</option>
        </select>
        <textarea id="kInput" rows="6" placeholder="D√°n m√£ v√†o ƒë√¢y, m·ªói d√≤ng 1 m√£..."></textarea>
        <button class="btn-buy" onclick="saveKeysToStore()">X√ÅC NH·∫¨N N·∫†P KHO</button>
        <button onclick="document.getElementById('modalKey').style.display='none'">ƒê√ìNG</button>
    </div></div>

    <div id="modalHistory" class="modal"><div class="modal-content">
        <h3>üìä L·ªäCH S·ª¨ GIAO D·ªäCH</h3>
        <div class="auth-tabs">
            <div class="tab-btn active" id="tabBuys" onclick="toggleHist('buys')">MUA H√ÄNG</div>
            <div class="tab-btn" id="tabCards" onclick="toggleHist('cards')">N·∫†P TH·∫∫</div>
        </div>
        <div id="histList" style="margin-top:15px;"></div>
        <button class="btn-buy" style="background:#333" onclick="document.getElementById('modalHistory').style.display='none'">THO√ÅT</button>
    </div></div>

    <div id="overlay" onclick="closeMenu()" style="display:none; position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:1500;"></div>

    <script>
        const DB_KEY = 'VINH_STORE_V49';
        const SS_KEY = 'VINH_SESSION_V49';

        let db = JSON.parse(localStorage.getItem(DB_KEY)) || {
            users: { "vinhmoddz": { pass: "vinhmoddz", bal: 10000000, admin: true, buys: [], cards: [] } },
            prods: [
                { id: 0, slug: "itachi", name: "Itachi Ping V3", plans: { "1 Ng√†y": 10000, "7 Ng√†y": 50000, "30 Ng√†y": 150000, "Vƒ©nh Vi·ªÖn": 500000 }, stock: { "1 Ng√†y": [], "7 Ng√†y": [], "30 Ng√†y": [], "Vƒ©nh Vi·ªÖn": [] } },
                { id: 1, slug: "hopper", name: "Hopper Plus", plans: { "1 Ng√†y": 15000, "7 Ng√†y": 70000, "30 Ng√†y": 200000, "Vƒ©nh Vi·ªÖn": 700000 }, stock: { "1 Ng√†y": [], "7 Ng√†y": [], "30 Ng√†y": [], "Vƒ©nh Vi·ªÖn": [] } },
                { id: 2, slug: "clone", name: "Acc Clone Level 5", plans: { "M·∫∑c ƒë·ªãnh": 20000 }, stock: { "M·∫∑c ƒë·ªãnh": [] } }
            ]
        };

        let curU = localStorage.getItem(SS_KEY) || null;
        function save() { localStorage.setItem(DB_KEY, JSON.stringify(db)); if(curU) render(); }
        window.addEventListener("beforeunload", save);

        function switchAuth(m) {
            document.getElementById('boxLogin').style.display = m==='login'?'block':'none';
            document.getElementById('boxReg').style.display = m==='reg'?'block':'none';
            document.getElementById('tabLogin').className = m==='login'?'tab-btn active':'tab-btn';
            document.getElementById('tabReg').className = m==='reg'?'tab-btn active':'tab-btn';
        }
        function doLogin() {
            let u = document.getElementById('uLog').value.trim(), p = document.getElementById('pLog').value.trim();
            if(db.users[u] && db.users[u].pass === p) { curU = u; localStorage.setItem(SS_KEY, u); startApp(); }
            else alert("Th√¥ng tin ƒëƒÉng nh·∫≠p kh√¥ng ch√≠nh x√°c!");
        }
        function doRegister() {
            let u = document.getElementById('uReg').value.trim(), p = document.getElementById('pReg').value.trim(), pc = document.getElementById('pRegC').value.trim();
            if(!u || p!==pc) return alert("M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp!");
            if(db.users[u]) return alert("T√™n t√†i kho·∫£n ƒë√£ t·ªìn t·∫°i!");
            db.users[u] = { pass: p, bal: 0, admin: false, buys: [], cards: [] };
            save(); alert("ƒêƒÉng k√Ω th√†nh c√¥ng!"); switchAuth('login');
        }

        function startApp() {
            document.getElementById('authScreen').style.display='none';
            document.getElementById('app').style.display='block';
            document.getElementById('uNameDisp').innerText = curU;
            document.getElementById('adminPanel').style.display = db.users[curU].admin ? 'block' : 'none';
            render();
        }

        function render() {
            document.getElementById('uBal').innerText = db.users[curU].bal.toLocaleString();
            let g = document.getElementById('shopGrid'); g.innerHTML = "";
            db.prods.forEach(p => {
                let sInfo = Object.keys(p.stock).map(k => `<b>${k}:</b> ${p.stock[k].length}`).join(' | ');
                let opts = `<select id="p-${p.id}">${Object.keys(p.plans).map(k=>`<option value="${k}">${k} - ${p.plans[k].toLocaleString()}ƒë</option>`).join('')}</select>`;
                g.innerHTML += `
                <div class="product-card">
                    <div class="stock-info">üì¶ T·ªìn kho:<br>${sInfo}</div>
                    <h2>${p.name}</h2>
                    ${opts}
                    <button class="btn-buy" onclick="buyItem(${p.id})">MUA NGAY</button>
                </div>`;
            });
        }

        function buyItem(id) {
            let p = db.prods[id], plan = document.getElementById(`p-${id}`).value, cost = p.plans[plan];
            if(db.users[curU].bal < cost) return alert("S·∫øp ∆°i, t√†i kho·∫£n kh√¥ng ƒë·ªß ti·ªÅn!");
            if(!p.stock[plan] || p.stock[plan].length === 0) return alert("G√≥i n√†y hi·ªán ƒëang h·∫øt h√†ng!");
            
            let key = p.stock[plan].shift();
            db.users[curU].bal -= cost;
            db.users[curU].buys.unshift({ name: p.name, plan: plan, key: key, time: new Date().toLocaleString() });
            save(); alert("MUA TH√ÄNH C√îNG! Check l·ªãch s·ª≠ ƒë·ªÉ nh·∫≠n m√£.");
        }

        function saveKeysToStore() {
            let slug = document.getElementById('kProd').value, time = document.getElementById('kTime').value, raw = document.getElementById('kInput').value.trim();
            let prod = db.prods.find(x => x.slug === slug);
            if(!prod.stock[time]) return alert("S·∫£n ph·∫©m n√†y kh√¥ng h·ªó tr·ª£ g√≥i th·ªùi gian ƒë√£ ch·ªçn!");
            if(raw && prod) {
                let keys = raw.split('\n').filter(k => k.trim() !== "");
                prod.stock[time].push(...keys);
                save(); alert(`ƒê√£ n·∫°p ${keys.length} m√£ v√†o kho ${prod.name} g√≥i ${time}`);
                document.getElementById('kInput').value = "";
                document.getElementById('modalKey').style.display='none';
            }
        }

        function switchPay(t) {
            document.getElementById('payThe').style.display = t==='the'?'block':'none';
            document.getElementById('payBank').style.display = t==='bank'?'block':'none';
            document.getElementById('navThe').style.background = t==='the'?'var(--accent)':'#333';
            document.getElementById('navBank').style.background = t==='bank'?'#0066ff':'#333';
        }
        function makeQR() {
            let a = document.getElementById('bAmount').value;
            if(!a || a < 1000) return alert("S·ªë ti·ªÅn n·∫°p t·ªëi thi·ªÉu l√† 1,000ƒë!");
            let msg = "NAP " + curU.toUpperCase();
            document.getElementById('qrImg').src = `https://img.vietqr.io/image/MB-0975651390-compact2.jpg?amount=${a}&addInfo=${msg}`;
            document.getElementById('qrInfo').innerText = "N·ªòI DUNG CHUY·ªÇN: " + msg;
            document.getElementById('qrArea').style.display = 'block';
        }
        function sendCard() {
            let s = document.getElementById('cSeri').value, p = document.getElementById('cPin').value;
            if(!s || !p) return alert("Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß Seri v√† M√£ th·∫ª!");
            db.users[curU].cards.unshift({ t: document.getElementById('cType').value, v: document.getElementById('cVal').value, pin: p, st: 'Ch·ªù duy·ªát', time: new Date().toLocaleString() });
            save(); alert("ƒê√£ g·ª≠i th√¥ng tin th·∫ª! Vui l√≤ng ch·ªù Admin duy·ªát.");
        }
        function showHistory() { document.getElementById('modalHistory').style.display='flex'; toggleHist('buys'); }
        function toggleHist(m) {
            let l = document.getElementById('histList'); l.innerHTML = "";
            document.getElementById('tabBuys').className = m==='buys'?'tab-btn active':'tab-btn';
            document.getElementById('tabCards').className = m==='cards'?'tab-btn active':'tab-btn';
            if(m === 'buys') {
                if(db.users[curU].buys.length === 0) l.innerHTML = "Ch∆∞a c√≥ giao d·ªãch mua h√†ng.";
                db.users[curU].buys.forEach(b => { l.innerHTML += `<div class="hist-item"><b>${b.name}</b> (${b.plan})<br><span style="color:red; font-weight:bold;">KEY: ${b.key}</span><br><small>${b.time}</small></div>`; });
            } else {
                if(db.users[curU].cards.length === 0) l.innerHTML = "Ch∆∞a c√≥ l·ªãch s·ª≠ n·∫°p th·∫ª.";
                db.users[curU].cards.forEach(c => { l.innerHTML += `<div class="hist-item"><b>${c.t} ${c.v}ƒë</b> - Tr·∫°ng th√°i: <b>${c.st}</b><br>M√£ th·∫ª: ${c.pin}<br><small>${c.time}</small></div>`; });
            }
        }
        function executeRobot() {
            let cmd = document.getElementById('robotCmd').value.trim(), p = cmd.split(" ");
            if(p[0] === ".chuyentien") {
                let u = p[1], v = parseInt(p[2]), act = p[3];
                if(act === "chuyen" && db.users[u]) {
                    db.users[u].bal += v;
                    db.users[u].cards.unshift({ t: 'Admin', v: v, pin: 'Robot n·∫°p', st: 'Th√†nh c√¥ng', time: new Date().toLocaleString() });
                    save(); alert("Robot ƒë√£ c·ªông ti·ªÅn th√†nh c√¥ng!");
                } else alert("L·ªánh kh√¥ng h·ª£p l·ªá ho·∫∑c ng∆∞·ªùi d√πng kh√¥ng t·ªìn t·∫°i!");
            }
            document.getElementById('robotCmd').value = "";
        }
        function logout() { save(); localStorage.removeItem(SS_KEY); location.reload(); }
        function openMenu() { document.getElementById('sideMenu').style.left = '0'; document.getElementById('overlay').style.display = 'block'; }
        function closeMenu() { document.getElementById('sideMenu').style.left = '-450px'; document.getElementById('overlay').style.display = 'none'; }
        if(curU) startApp();
    </script>
</body>
  </html>
  
